(this["webpackJsonpreact-doctored2"]=this["webpackJsonpreact-doctored2"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var o,s,a=n(0),r=n.n(a),i=n(3),d=n.n(i),l=n(4),c=n(5),u=n(7),g=n(6),h=n(1),v=n(8);n(14);function m(e){for(var t=e.nodes,n="",a=[],i=0;i<t.length;i++){var d=t[i];switch(d[0]){case o.Element:a[a.length-1]===s.inline||["a","span","link"].includes(d[1])?(a.push(s.inline),n+='<div class="d-inline"><div class="d-inline__inner"><div class="d-inline__button" role="button" tabindex="0">'.concat(d[1],'</div><div class="d-inline__inner__content">')):(a.push(s.block),n+='<div class="d-block"><div class="d-block__button" role="button" tabindex="0">'.concat(d[1],'</div><div class="d-block__inner">'));break;case o.Text:n+="<span contentEditable>".concat(d[1],"</span>");break;case o.CloseElement:a.pop()===s.inline?n+="</div></div></div>":n+="</div></div>"}}return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})}!function(e){e[e.Element=1]="Element",e[e.Text=3]="Text",e[e.CloseElement=20]="CloseElement"}(o||(o={})),function(e){e[e.block=0]="block",e[e.inline=1]="inline"}(s||(s={}));var p=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(g.a)(t).call(this,e))).sourceWorker=void 0,n.state={},n.sourceWorkerInit=n.sourceWorkerInit.bind(Object(h.a)(n)),n.sourceWorkerInit(),n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"sourceWorkerInit",value:function(){this.onmessage=this.onmessage.bind(this),this.sourceWorker=new Worker("./doctored.worker.js"),this.sourceWorker.onmessage=this.onmessage,this.sourceWorker.postMessage({type:"init-doc",location:window.location.toString()})}},{key:"onmessage",value:function(e){var t=this.state.requestedRange,n=e.data;if(console.log("UI Thread Received: ",n),"doc-ready"===n.type&&this.sourceWorker.postMessage({type:"load-source",url:new URL("./large.xml",window.location.toString()).toString()}),"loading"===n.type){var o=[0,Math.min(100,n.nodesLength)];this.setState({loading:n}),n.nodesLength>0&&(!t||o[0]!==t[0]||o[1]!==t[1])&&(console.log("GET RANGE"),this.sourceWorker.postMessage({type:"get-range/request",startIndex:o[0],endIndex:o[1]}),this.setState({requestedRange:o}))}"loaded"===n.type&&(this.setState({loaded:n}),this.sourceWorker.postMessage({type:"get-range/request",startIndex:0,endIndex:Math.min(100,n.nodesLength)})),"get-range/response"===n.type&&(console.log(JSON.stringify(n.nodes)),this.setState({nodes:n.nodes}))}},{key:"render",value:function(){var e=this.state,t=e.loaded,n=e.loading,o=e.nodes;return r.a.createElement("div",null,r.a.createElement("header",null,"Doctored 2: XML editor demo"),r.a.createElement("div",{className:"intro"},r.a.createElement("p",null,"Loading and parsing an 80MB XML file in a background thread using WASM."),r.a.createElement("p",null,"Open your dev console to see messages between threads."),r.a.createElement("div",null,n&&n.loadedLengthBytes),r.a.createElement("div",null,t&&"DONE")),r.a.createElement("div",{className:"doctored-nodes"},o&&r.a.createElement(m,{nodes:o})))}}]),t}(a.Component);d.a.render(r.a.createElement(p,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.05628483.chunk.js.map